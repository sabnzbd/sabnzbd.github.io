---
title: Notification Scripts
---
<p>
    SABnzbd can run a user-provided script to be executed when a notification needs to be sent.
    In <a href="/wiki/configuration/{{ site.wiki_version }}/notifications">Config-&gt;Notifications</a> you can specify for which type of notifications the script should be executed.</p>
<p>
    Scripts may use any scripting language available on your system; common choices are Python, Unix shell, and Windows batch scripts. All scripts must be located in the scripts-directory, that can be specified in <a href="/wiki/configuration/{{ site.wiki_version }}/folders">Config-&gt;Folders</a>. Furthermore, the script must be executable. On Linux this means the x-bit must be on. On Windows, the requirement is that the script's extension is listed in your system's <code>PATHEXT</code> environment variable.
</p>

<p>If everything went well, SABnzbd expects the script to exit with status code <code>0</code>. If the returned exit status is non-zero, the output will be shown to the user as an error.</p>

<hr>
<h2>Parameters</h2>
<p> The script will receive the parameters described below.
    Use <code>%1</code> in Windows scripts and <code>$1</code> in Unix scripts. Note that on Windows the input parameters are surrounded by quotes (e.g. <code>"job name"</code>).
</p>

<p><span class="label label-warning">NOTE</span> <strong>Much more information is available to scripts via environment variables, <a href="#env_vars">see below</a>!</strong></p>

<table class="table table-bordered table-hover table-not-fixed">
    <thead>
        <tr>
            <th>Position</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>Type of notification
                <ul>
                    <li><code>startup</code> = Startup/Shutdown</li>
                    <li><code>download</code> = Added NZB</li></li>
                    <li><code>pp</code> = Post-processing started</li>
                    <li><code>complete</code> = Job finished</li>
                    <li><code>failed</code> = Job failed</li>
                    <li><code>warning</code> = Warning</li>
                    <li><code>error</code> = Error</li>
                    <li><code>disk_full</code> = Disk full</li>
                    <li><code>queue_done</code> = Queue finished</li>
                    <li><code>new_login</code> = User logged in</li>
                    <li><code>other</code> = Other Messages</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td>2</td>
            <td>The title of the notification in the user's language</td>
        </tr>
        <tr>
            <td>3</td>
            <td>The notification message</td>
        </tr>
        <tr>
            <td>Environment variable: <br><code>SAB_NOTIFICATION_PARAMETERS</code></td>
            <td>Parameters (can be specified in <a href="/wiki/configuration/{{ site.wiki_version }}/notifications">Config-&gt;Notifications</a>)</td>
        </tr>
    </tbody>
</table>

<hr>
<h2 id="env_vars">Environment variables</h2>
<p>Notification scripts receive a limited amount of extra information via environment variables, in addition to any notification script parameters set in the config:</p>
<table class="table table-bordered table-hover">
    <thead>
        <tr>
            <th>Variable</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>SAB_VERSION</code></td>
            <td>The version of SABnzbd</td>
        </tr>
        <tr>
            <td><code>SAB_PROGRAM_DIR</code></td>
            <td>The directory where the current SABnzbd instance is located</td>
        </tr>
        <tr>
            <td><code>SAB_API_KEY</code></td>
            <td>The API-key that can be used to communicate with SABnzbd via its <a href="/wiki/configuration/{{ site.wiki_version }}/api">API</a>.</td>
        </tr>
        <tr>
            <td><code>SAB_API_URL</code></td>
            <td>
                The URL to the SABnzbd <a href="/wiki/configuration/{{ site.wiki_version }}/api">API</a>, for example <code>http://127.0.0.1:8080/api</code>.<br>
                It does not include the required <code>apikey</code> parameter, which is supplied via <code>SAB_API_KEY</code>.
            </td>
        </tr>
        <tr>
            <td><code>SAB_PAR2_COMMAND</code></td>
            <td>The path to the <code>par2</code> command on the system running SABnzbd</td>
        </tr>
        <tr>
            <td><code>SAB_RAR_COMMAND</code></td>
            <td>The path to the <code>unrar</code> command on the system running SABnzbd</td>
        </tr>
        <tr>
            <td><code>SAB_7ZIP_COMMAND</code></td>
            <td>The path to the <code>7z</code> command on the system runnning SABnzbd. Not all systems have 7zip installed (it's optional for SABnzbd), so this can also be empty</td>
        </tr>
    </tbody>
</table>

<hr>
<h2>Example Python script</h2>
<p>The get the parameters in python, you can do this:</p>
{% highlight python %}
import os
import sys
try:
    (scriptname, notification_type, notification_title, notification_text) = sys.argv
except:
    print("No commandline parameters found")
    sys.exit(1)

parameters = os.environ.get("SAB_NOTIFICATION_PARAMETERS")

# continue script

# Your code goes here

# Success code
sys.exit(0)
{% endhighlight %}
